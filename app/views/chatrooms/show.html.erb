<%= stylesheet_link_tag 'chatrooms' %>
<div class="container" id='chat-show'>
   <div class="messaging">
      <h4><%= @room.title %></h4>
      <div class="inbox_msg">
         <div class="inbox_people">
            <div class="headind_srch">
               <div class="recent_heading">
                  <h4>Recent</h4>
               </div>
            </div>
            <div class="inbox_chat">
               <% @other_rooms.each do |room| %>
                  <div class="chat_list active_chat">
                     <%= link_to chatroom_path(room) do %>
                        <div class="chat_people">
                           <div class="chat_img"> <%= image_tag current_user.avatar %> </div>
                           <div class="chat_ib">
                              <h5><%= room.last_message.user.email %><span class="chat_date"><%= room.last_message.created_at.strftime('%Y/%m/%d %H:%M:%S') %></span></h5>
                              <p><%= room.last_message.content.truncate(25, omission: '... (continued)') %></p>
                           </div>
                        </div>
                     <% end %>
                  </div>
               <% end %>
            </div>
         </div>
         <div class="mesgs">
            <div class="msg_history">
               <% @messages.each do |message| %>
                  <% if message.user == current_user %>
                     <div class="outgoing_msg">
                        <div class="sent_msg">
                           <p><%= message.content %></p>
                           <span class="time_date"><%= message.created_at.strftime('%Y/%m/%d %H:%M:%S') %></span>
                        </div>
                     </div>
                  <% else %>
                     <div class="incoming_msg">
                        <div class="incoming_msg_img">
                           <%= image_tag message.user.avatar %>
                        </div>
                        <div class="received_msg">
                           <div class="received_withd_msg">
                              <p><%= message.content %></p>
                              <span class="time_date"><%= message.created_at.strftime('%Y/%m/%d %H:%M:%S') %></span>
                           </div>
                        </div>
                     </div>
                  <% end %>
               <% end %>
            </div>
            <div class="type_msg">
               <div class="input_msg_write">
                  <input type="text" class="write_msg" placeholder="Type a message" data-behavior="room_speaker" />
                  <button class="msg_send_btn" type="button" id='send_btn'><i class="far fa-comment-dots"></i></button>
               </div>
            </div>
         </div>
      </div>
      <p class="text-center top_spac"> Design by <a target="_blank" href="#">Sunil Rajput</a></p>
   </div>
</div>
<script type="text/javascript">
   var roomID = "<%= @room.id %>";
   var userID = "<%= current_user.id %>"
</script>